loops conditionals and parsing in bash